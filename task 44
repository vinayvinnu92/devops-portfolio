The Nautilus application development team shared static website content that needs to be hosted on the httpd web server using a containerised platform. The team has shared details with the DevOps team, and we need to set up an environment according to those guidelines. Below are the details: a. On App Server 2 in Stratos DC create a container named httpd using a docker compose file /opt/docker/docker-compose.yml (please use the exact name for file). b. Use httpd (preferably latest tag) image for container and make sure container is named as httpd; you can use any name for service. c. Map 80 number port of container with port 3004 of docker host. d. Map container's /usr/local/apache2/htdocs volume with /opt/security volume of docker host which is already there. (please do not modify any data within these locations).

ğŸ–¼ï¸ Diagram: httpd Container with Volume and Port Mapping
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚        App Server 2 (Stratos DC)          â”‚
                    â”‚                                           â”‚
 Host Port 3004     â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   â”‚          Docker Engine             â”‚  â”‚
                    â”‚   â”‚------------------------------------â”‚  â”‚
                    â”‚   â”‚ docker-compose up -d               â”‚  â”‚
                    â”‚   â”‚                                    â”‚  â”‚
                    â”‚   â”‚ Service: webserver                 â”‚  â”‚
                    â”‚   â”‚ Container Name: httpd              â”‚  â”‚
                    â”‚   â”‚ Image: httpd:latest                â”‚  â”‚
                    â”‚   â”‚ Ports: 3004(host) -> 80(container) â”‚  â”‚
                    â”‚   â”‚ Volumes: /opt/security ->          â”‚  â”‚
                    â”‚   â”‚          /usr/local/apache2/htdocs â”‚  â”‚
                    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚                                           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚       Container: httpd       â”‚
                       â”‚------------------------------â”‚
                       â”‚ Image: httpd:latest          â”‚
                       â”‚ Port 80 (mapped to 3004)     â”‚
                       â”‚ /usr/local/apache2/htdocs    â”‚
                       â”‚ mapped to /opt/security      â”‚
                       â”‚ Status: Running              â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

#âœ… 1. SSH into App Server 2
ssh tony@stapp02


#(username may vary depending on your lab environment)

#âœ… 2. Create the directory (if not already present)
sudo mkdir -p /opt/docker

#âœ… 3. Create the docker-compose.yml file

#Open the file:

sudo vi /opt/docker/docker-compose.yml


#Paste the following exact Docker Compose configuration:

version: '3.8'

services:
  webserver:
    image: httpd:latest
    container_name: httpd
    ports:
      - "3004:80"
    volumes:
      - /opt/security:/usr/local/apache2/htdocs


Save and exit (ESC â†’ :wq).

#âœ… 4. Start the container using Docker Compose
cd /opt/docker
sudo docker compose up -d


#This will:

âœ” Pull httpd:latest
âœ” Create container httpd
âœ” Map host port 3004 â†’ container port 80
âœ” Mount /opt/security â†’ /usr/local/apache2/htdocs
âœ” Run the container in the background

#ğŸ” 5. Verify the container is running
sudo docker ps


You should see:

NAME: httpd

PORTS: 0.0.0.0:3004 â†’ 80/tcp

IMAGE: httpd:latest


